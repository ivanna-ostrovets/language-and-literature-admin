<md-input-container class="tasks-quantity">
  <input mdInput
         required
         type="number"
         name="tasksQuantity"
         placeholder="Виберіть кількість запитань в тесті"
         min="0"
         [(ngModel)]="tasksQuantity">
</md-input-container>

<div class="center-align" *ngIf="tasksQuantity > 0">
  <button md-raised-button
          [ngClass]="{ 'disabled': currentTab == 0 }"
          (click)="before(currentTab - 1)">
    <md-icon>navigate_before</md-icon>
  </button>

  <md-tab-group>
    <md-tab *ngFor="let number of getNumbersRange(tasksQuantity); let i=index"
            label="{{ i + 1 }}"
            id="tab{{ i }}"
            (click)="currentTab = i"
            [ngClass]="{'active' : currentTab == i}">
      <form novalidate
            (ngSubmit)="onSubmit()"
            #createtestform="ngForm"
            class="create-test-form">

        <md-input-container>
          <textarea mdInput
                    required
                    name="question{{ i }}"
                    placeholder="Завдання"
                    [(ngModel)]="question[i]">
          </textarea>
        </md-input-container>

        <md-slide-toggle name="addImage{{ i }}"
                         [(ngModel)]="addImage[i]">
          Додати зображення
        </md-slide-toggle>

        <button md-raised-button>
          <label for="file-input">Select</label>
        </button>
        <input id="file-input" type="file">

        <div class="row file-field input-field" *ngIf="addImage[i]">
          <div class="btn waves-effect light-blue">
            <span>Додати зображення</span>
            <input type="file"
                   id="image{{ i }}"
                   [(ngModel)]="image[i]"
                   name="image{{ i }}"
                   accept="image/*">
          </div>
          <div class="file-path-wrapper">
            <input class="file-path validate" type="text">
          </div>
        </div>

        <md-slide-toggle name="matching{{ i }}"
                         [(ngModel)]="matching[i]">
          Завдання на відповідність
        </md-slide-toggle>

        <md-input-container>
          <input mdInput
                 required
                 type="number"
                 name="answersQuantity{{ i }}"
                 placeholder="Виберіть кількість відповідей"
                 min="0"
                 [(ngModel)]="answersQuantity[i]">
        </md-input-container>

        <md-input-container *ngIf="!matching[i]">
          <textarea mdInput
                    required
                    *ngFor="let number of getNumbersRange(answersQuantity[i])"
                    name="answer_{{ number }}_{{ i }}"
                    placeholder="Завдання"
                    [(ngModel)]="answers[i][number]">
          </textarea>
        </md-input-container>

        <table class="answers-table" *ngIf="matching[i]">
          <thead>
            <tr>
              <th>
                <md-input-container>
                  <input mdInput
                         required
                         name="answersTableTitle0_{{ i }}"
                         placeholder="Заголовок"
                         [(ngModel)]="answersTableTitles[i][0]">
                </md-input-container>
              </th>
              <th>
                <md-input-container>
                  <input mdInput
                         required
                         name="answersTableTitle1_{{ i }}"
                         placeholder="Заголовок"
                         [(ngModel)]="answersTableTitles[i][1]">
                </md-input-container>
              </th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let number of getNumbersRange(answersQuantity[i])">
              <td>
                <md-input-container>
                  <input mdInput
                         required
                         name="answersNumbers{{ number }}_{{ i }}"
                         [(ngModel)]="answersNumbers[i][number]">
                </md-input-container>
              </td>
              <td>
                <md-input-container>
                  <input mdInput
                         required
                         name="answersLetters{{ number }}_{{ i }}"
                         [(ngModel)]="answersLetters[i][number]">
                </md-input-container>
              </td>
            </tr>
          </tbody>
        </table>

        <button md-raised-button
                class="center-align"
                [disabled]="!createtestform.form.valid">
          Створити тест
        </button>
      </form>
    </md-tab>
  </md-tab-group>

  <button md-raised-button
          [ngClass]="{ 'disabled': currentTab == tasksQuantity - 1 }"
          (click)="next(currentTab + 1)">
    <md-icon>navigate_next</md-icon>
  </button>
</div>